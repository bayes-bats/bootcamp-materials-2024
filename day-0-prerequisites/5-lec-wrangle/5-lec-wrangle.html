<!DOCTYPE html>
<html lang="en"><head>
<script src="5-lec-wrangle_files/libs/clipboard/clipboard.min.js"></script>
<script src="5-lec-wrangle_files/libs/quarto-html/tabby.min.js"></script>
<script src="5-lec-wrangle_files/libs/quarto-html/popper.min.js"></script>
<script src="5-lec-wrangle_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="5-lec-wrangle_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="5-lec-wrangle_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="5-lec-wrangle_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="5-lec-wrangle_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.340">

  <title>Data Wrangling</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="5-lec-wrangle_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="5-lec-wrangle_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="5-lec-wrangle_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="5-lec-wrangle_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="5-lec-wrangle_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="5-lec-wrangle_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="5-lec-wrangle_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="https://www.stat.uci.edu/bayes-bats/img/logo.png" data-background-position="50% 75%" data-background-size="12%" class="quarto-title-block center">
  <h1 class="title">Data Wrangling</h1>
  <p class="subtitle">Prerequisites</p>

<div class="quarto-title-authors">
</div>

</section>
<section class="slide level2">

<div class="font75">
<p>The Pipe Operator <code>%&gt;%</code></p>
</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<div class="font75">
<p>Three solutions to a single problem</p>
</div>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<p>What is the average of 4, 8, 16 approximately?</p>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<p>1.What is the average of <strong>4, 8, 16</strong> approximately?</p>
<p>2.What is the <strong>average</strong> of 4, 8, 16 approximately?</p>
<p>3.What is the average of 4, 8, 16 <strong>approximately</strong>?</p>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<div class="font75">
<p>Solution 1: Functions within Functions</p>
</div>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  8 16</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9.333333</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</section>
<section id="section-5" class="slide level2">
<h2></h2>
<p><strong>Problem with writing functions within functions</strong></p>
<p>Things will get messy and more difficult to read and debug as we deal with more complex operations on data.</p>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div class="font75">
<p>Solution 2: Creating Objects</p>
</div>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a>numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  8 16</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>avg_number <span class="ot">&lt;-</span> <span class="fu">mean</span>(numbers)</span>
<span id="cb9-2"><a href="#cb9-2"></a>avg_number</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9.333333</code></pre>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">round</span>(avg_number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<p><strong>Problem with creating many objects</strong></p>
<p>We will end up with too many objects in <code>Environment</code>.</p>
</section>
<section id="section-9" class="slide level2">
<h2></h2>
<div class="font75">
<p>Solution 3: The (forward) Pipe Operator %&gt;%</p>
</div>
<hr>
<div class="font75">
<p>Shortcut: <br>Ctrl (Command) + Shift + M</p>
</div>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">mean</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">round</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Combine 4, 8, and 16 <code>and then</code><br>
Take the mean <code>and then</code><br>
Round the output</p>
</div>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<p>The output of the first function is the first argument of the second function.</p>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<p>Do you recall composite functions such as <span class="math inline">\(f \circ g(x)\)</span>?</p>
<p>Now we have <span class="math inline">\(f \circ g \circ h (x)\)</span> or <code>round(mean(c(4, 8, 16)))</code></p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">h</span>(x) <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">g</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">f</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="fu">mean</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="fu">round</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="section-13" class="slide level2">
<h2></h2>
<div class="font75">
<p>Subsetting data frames</p>
</div>
</section>
<section id="section-14" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">glimpse</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 68,564
Columns: 35
$ `Row ID`                       &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu",…
$ Year                           &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 201…
$ `Department Title`             &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Poli…
$ `Payroll Department`           &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 430…
$ `Record Number`                &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 100…
$ `Job Class Title`              &lt;chr&gt; "Police Detective II", "Clerk Typist", …
$ `Employment Type`              &lt;chr&gt; "Full Time", "Full Time", "Full Time", …
$ `Hourly or Event Rate`         &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.4…
$ `Projected Annual Salary`      &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.…
$ `Q1 Payments`                  &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20,…
$ `Q2 Payments`                  &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20,…
$ `Q3 Payments`                  &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81,…
$ `Q4 Payments`                  &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03,…
$ `Payments Over Base Pay`       &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1…
$ `% Over Base Pay`              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `Total Payments`               &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.…
$ `Base Pay`                     &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.…
$ `Permanent Bonus Pay`          &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, …
$ `Longevity Bonus Pay`          &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 172…
$ `Temporary Bonus Pay`          &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00…
$ `Lump Sum Pay`                 &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.0…
$ `Overtime Pay`                 &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.0…
$ `Other Pay &amp; Adjustments`      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.…
$ `Other Pay (Payroll Explorer)` &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 137…
$ MOU                            &lt;chr&gt; "24", "3", "24", "24", "12", "3", "24",…
$ `MOU Title`                    &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT"…
$ `FMS Department`               &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70,…
$ `Job Class`                    &lt;chr&gt; "2223", "1358", "2227", "2232", "1839",…
$ `Pay Grade`                    &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1",…
$ `Average Health Cost`          &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40,…
$ `Average Dental Cost`          &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24,…
$ `Average Basic Life`           &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 1…
$ `Average Benefit Cost`         &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52,…
$ `Benefits Plan`                &lt;chr&gt; "Police", "City", "Police", "Police", "…
$ `Job Class Link`               &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pd…</code></pre>
</div>
</div>
</section>
<section id="section-15" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>lapd <span class="ot">&lt;-</span> <span class="fu">clean_names</span>(lapd)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">glimpse</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 68,564
Columns: 35
$ row_id                     &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu", "3-…
$ year                       &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
$ department_title           &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Police (…
$ payroll_department         &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 4301, 4…
$ record_number              &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 1000232…
$ job_class_title            &lt;chr&gt; "Police Detective II", "Clerk Typist", "Pol…
$ employment_type            &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Ful…
$ hourly_or_event_rate       &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.42, 4…
$ projected_annual_salary    &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.24, …
$ q1_payments                &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20, 208…
$ q2_payments                &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20, 241…
$ q3_payments                &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81, 215…
$ q4_payments                &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03, 252…
$ payments_over_base_pay     &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1376.…
$ percent_over_base_pay      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ total_payments             &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.24, …
$ base_pay                   &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.71, …
$ permanent_bonus_pay        &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, 0.00…
$ longevity_bonus_pay        &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 1726.16…
$ temporary_bonus_pay        &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00, 68…
$ lump_sum_pay               &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.00, 0…
$ overtime_pay               &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.00, 4…
$ other_pay_adjustments      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.80, …
$ other_pay_payroll_explorer &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 1376.19…
$ mou                        &lt;chr&gt; "24", "3", "24", "24", "12", "3", "24", "24…
$ mou_title                  &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT", "P…
$ fms_department             &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70,…
$ job_class                  &lt;chr&gt; "2223", "1358", "2227", "2232", "1839", "22…
$ pay_grade                  &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1", "B"…
$ average_health_cost        &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40, 107…
$ average_dental_cost        &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24, 405…
$ average_basic_life         &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 11.40…
$ average_benefit_cost       &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52, 111…
$ benefits_plan              &lt;chr&gt; "Police", "City", "Police", "Police", "City…
$ job_class_link             &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pdf", …</code></pre>
</div>
</div>
</section>
<section id="subsetting-variablescolumns" class="slide level2">
<h2>subsetting variables/columns</h2>

<img data-src="img/data-wrangle.001.jpeg" style="width:80.0%" class="r-stretch"><p><code>select()</code></p>
</section>
<section id="subsetting-observationsrows" class="slide level2">
<h2>subsetting observations/rows</h2>

<img data-src="img/data-wrangle.002.jpeg" style="width:80.0%" class="r-stretch"><p><code>slice()</code> and <code>filter()</code></p>
</section>
<section id="section-16" class="slide level2">
<h2></h2>
<p><code>select</code> is used to select certain variables in the data frame.</p>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">select</span>(lapd, year, base_pay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,564 × 2
    year base_pay
   &lt;dbl&gt;    &lt;dbl&gt;
 1  2013  105765.
 2  2013   47662.
 3  2013  101288.
 4  2013  118087.
 5  2013   90322.
 6  2013   62770.
 7  2013   93718.
 8  2013       0 
 9  2013   51246.
10  2013   74227.
# ℹ 68,554 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">select</span>(year, base_pay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,564 × 2
    year base_pay
   &lt;dbl&gt;    &lt;dbl&gt;
 1  2013  105765.
 2  2013   47662.
 3  2013  101288.
 4  2013  118087.
 5  2013   90322.
 6  2013   62770.
 7  2013   93718.
 8  2013       0 
 9  2013   51246.
10  2013   74227.
# ℹ 68,554 more rows</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-17" class="slide level2">
<h2></h2>
<p><code>select</code> can also be used to drop certain variables if used with a negative sign.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">select</span>(lapd, <span class="sc">-</span>row_id, <span class="sc">-</span>department_title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,564 × 33
    year payroll_department record_number job_class_title        employment_type
   &lt;dbl&gt;              &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt;          
 1  2013               4301    1000027830 Police Detective II    Full Time      
 2  2013               4302    1000155488 Clerk Typist           Full Time      
 3  2013               4301    1000194958 Police Sergeant I      Full Time      
 4  2013               4301    1000232317 Police Lieutenant I    Full Time      
 5  2013               4302    1000329284 Principal Storekeeper  Full Time      
 6  2013               4302    1001124320 Police Service Repres… Full Time      
 7  2013               4301    1001221822 Police Officer III     Full Time      
 8  2013               4301    1001243583 Police Sergeant I      Full Time      
 9  2013               4301    1001317832 Police Officer II      Full Time      
10  2013               4301     100162910 Police Officer II      Full Time      
# ℹ 68,554 more rows
# ℹ 28 more variables: hourly_or_event_rate &lt;dbl&gt;,
#   projected_annual_salary &lt;dbl&gt;, q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;,
#   q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;, payments_over_base_pay &lt;dbl&gt;,
#   percent_over_base_pay &lt;dbl&gt;, total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;,
#   permanent_bonus_pay &lt;dbl&gt;, longevity_bonus_pay &lt;dbl&gt;,
#   temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="selection-helpers" class="slide level2">
<h2>Selection helpers</h2>
<p><code>starts_with()</code><br>
<code>ends_with()</code><br>
<code>contains()</code></p>
</section>
<section id="section-18" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">select</span>(lapd, <span class="fu">starts_with</span>(<span class="st">"q"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,564 × 4
   q1_payments q2_payments q3_payments q4_payments
         &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
 1      24931.      29182.      26546.      29605.
 2      11344.      13212.      11508.      13443.
 3      24184       28327.      28744.      33225.
 4      29391.      36591.      32905.      37234.
 5      20813       24136       21518.      25231.
 6      16057.      17927.      14150.      17052.
 7      22162.      25664.      23404.      24586.
 8          0           0         331.          0 
 9      11941.      14330.      13404.      14537.
10      17046.      20457.      18777.      21371.
# ℹ 68,554 more rows</code></pre>
</div>
</div>
</section>
<section id="section-19" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">select</span>(lapd, <span class="fu">ends_with</span>(<span class="st">"pay"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,564 × 8
   payments_over_base_pay percent_over_base_pay base_pay permanent_bonus_pay
                    &lt;dbl&gt;                 &lt;dbl&gt;    &lt;dbl&gt;               &lt;dbl&gt;
 1                  4499.                     0  105765.               3174.
 2                  1845.                     0   47662.                  0 
 3                 13192.                     0  101288.               7364.
 4                 18035.                     0  118087.               7087.
 5                  1376.                     0   90322.                  0 
 6                  2415.                     0   62770.                  0 
 7                  2099.                     0   93718.                866.
 8                   331.                     0       0                   0 
 9                  2967.                     0   51246.               1540.
10                  3424.                     0   74227.               2233.
# ℹ 68,554 more rows
# ℹ 4 more variables: longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;,
#   lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-20" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">select</span>(lapd, <span class="fu">contains</span>(<span class="st">"pay"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 68,564 × 17
   payroll_department q1_payments q2_payments q3_payments q4_payments
                &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
 1               4301      24931.      29182.      26546.      29605.
 2               4302      11344.      13212.      11508.      13443.
 3               4301      24184       28327.      28744.      33225.
 4               4301      29391.      36591.      32905.      37234.
 5               4302      20813       24136       21518.      25231.
 6               4302      16057.      17927.      14150.      17052.
 7               4301      22162.      25664.      23404.      24586.
 8               4301          0           0         331.          0 
 9               4301      11941.      14330.      13404.      14537.
10               4301      17046.      20457.      18777.      21371.
# ℹ 68,554 more rows
# ℹ 12 more variables: payments_over_base_pay &lt;dbl&gt;,
#   percent_over_base_pay &lt;dbl&gt;, total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;,
#   permanent_bonus_pay &lt;dbl&gt;, longevity_bonus_pay &lt;dbl&gt;,
#   temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;,
#   other_pay_adjustments &lt;dbl&gt;, other_pay_payroll_explorer &lt;dbl&gt;,
#   pay_grade &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="subsetting-variablescolumns-1" class="slide level2">
<h2>subsetting variables/columns</h2>

<img data-src="img/data-wrangle.001.jpeg" style="width:80.0%" class="r-stretch"><p><code>select()</code></p>
</section>
<section id="subsetting-observationsrows-1" class="slide level2">
<h2>subsetting observations/rows</h2>

<img data-src="img/data-wrangle.002.jpeg" style="width:80.0%" class="r-stretch"><p><code>slice()</code> and <code>filter()</code></p>
</section>
<section id="section-21" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><code>slice()</code> subsetting rows based on a row number.</p>
<p>The data below include all the rows from third to seventh. Including third and seventh.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">slice</span>(lapd, <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 35
  row_id  year department_title payroll_department record_number job_class_title
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                         &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;          
1 3-100…  2013 Police (LAPD)                  4301    1000194958 Police Sergean…
2 3-100…  2013 Police (LAPD)                  4301    1000232317 Police Lieuten…
3 3-100…  2013 Police (LAPD)                  4302    1000329284 Principal Stor…
4 3-100…  2013 Police (LAPD)                  4302    1001124320 Police Service…
5 3-100…  2013 Police (LAPD)                  4301    1001221822 Police Officer…
# ℹ 29 more variables: employment_type &lt;chr&gt;, hourly_or_event_rate &lt;dbl&gt;,
#   projected_annual_salary &lt;dbl&gt;, q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;,
#   q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;, payments_over_base_pay &lt;dbl&gt;,
#   percent_over_base_pay &lt;dbl&gt;, total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;,
#   permanent_bonus_pay &lt;dbl&gt;, longevity_bonus_pay &lt;dbl&gt;,
#   temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;,
#   other_pay_adjustments &lt;dbl&gt;, other_pay_payroll_explorer &lt;dbl&gt;, mou &lt;chr&gt;, …</code></pre>
</div>
</div>
</div><div class="column" style="width:45%;">
<p><code>filter()</code> subsetting rows based on a condition.</p>
<p>The data below includes rows when the recorded year is 2018.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">filter</span>(lapd, year <span class="sc">==</span> <span class="dv">2018</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 35
   row_id            year department_title payroll_department record_number
   &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;                         &lt;dbl&gt;         &lt;dbl&gt;
 1 8-1000027830ctFu  2018 Police (LAPD)                  4301    1000027830
 2 8-1000194958ctFu  2018 Police (LAPD)                  4301    1000194958
 3 8-1000232317ctFu  2018 Police (LAPD)                  4301    1000232317
 4 8-1001124320ctFu  2018 Police (LAPD)                  4302    1001124320
 5 8-1001221822ctFu  2018 Police (LAPD)                  4301    1001221822
 6 8-1001317832ctFu  2018 Police (LAPD)                  4301    1001317832
 7 8-100162910ctFu   2018 Police (LAPD)                  4301     100162910
 8 8-1001675957ctFu  2018 Police (LAPD)                  4301    1001675957
 9 8-1001884819ctFu  2018 Police (LAPD)                  4302    1001884819
10 8-1001893163ctFu  2018 Police (LAPD)                  4302    1001893163
# ℹ 14,814 more rows
# ℹ 30 more variables: job_class_title &lt;chr&gt;, employment_type &lt;chr&gt;,
#   hourly_or_event_rate &lt;dbl&gt;, projected_annual_salary &lt;dbl&gt;,
#   q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;, q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;,
#   payments_over_base_pay &lt;dbl&gt;, percent_over_base_pay &lt;dbl&gt;,
#   total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;, permanent_bonus_pay &lt;dbl&gt;,
#   longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, …</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-22" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="relational-operators-in-r">Relational Operators in R</h3>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td>Less than</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>Greater than</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>Less than or equal to</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>Greater than or equal to</td>
</tr>
<tr class="odd">
<td>==</td>
<td>Equal to</td>
</tr>
<tr class="even">
<td>!=</td>
<td>Not equal to</td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:50%;">
<h3 id="logical-operators-in-r">Logical Operators in R</h3>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&amp;</td>
<td>and</td>
</tr>
<tr class="even">
<td>|</td>
<td>or</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="section-23" class="slide level2">
<h2></h2>
Q. According to <a href="https://datausa.io/profile/geo/los-angeles-ca#:~:text=In%202018%2C%20Los%20Angeles%2C%20CA,%2462%2C474%2C%20a%203.78%25%20increase.">datausa.io</a> Los Angeles had a median household income of $62474 in 2018. How many LAPD staff members had a base pay higher than $62474 in year 2018 according to this data?
<hr>
<p>Median household income is <strong>not</strong> the same thing as median employee income. Our aim is data wrangling and not necessarily statistical analysis for now.</p>
</section>
<section id="section-24" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2018</span> <span class="sc">&amp;</span> base_pay <span class="sc">&gt;</span> <span class="dv">62474</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11,690 × 35
   row_id            year department_title payroll_department record_number
   &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;                         &lt;dbl&gt;         &lt;dbl&gt;
 1 8-1000027830ctFu  2018 Police (LAPD)                  4301    1000027830
 2 8-1000194958ctFu  2018 Police (LAPD)                  4301    1000194958
 3 8-1000232317ctFu  2018 Police (LAPD)                  4301    1000232317
 4 8-1001124320ctFu  2018 Police (LAPD)                  4302    1001124320
 5 8-1001221822ctFu  2018 Police (LAPD)                  4301    1001221822
 6 8-1001317832ctFu  2018 Police (LAPD)                  4301    1001317832
 7 8-100162910ctFu   2018 Police (LAPD)                  4301     100162910
 8 8-1001675957ctFu  2018 Police (LAPD)                  4301    1001675957
 9 8-1001884819ctFu  2018 Police (LAPD)                  4302    1001884819
10 8-1001893163ctFu  2018 Police (LAPD)                  4302    1001893163
# ℹ 11,680 more rows
# ℹ 30 more variables: job_class_title &lt;chr&gt;, employment_type &lt;chr&gt;,
#   hourly_or_event_rate &lt;dbl&gt;, projected_annual_salary &lt;dbl&gt;,
#   q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;, q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;,
#   payments_over_base_pay &lt;dbl&gt;, percent_over_base_pay &lt;dbl&gt;,
#   total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;, permanent_bonus_pay &lt;dbl&gt;,
#   longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="section-25" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2018</span> <span class="sc">&amp;</span> base_pay <span class="sc">&gt;</span> <span class="dv">62474</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11690</code></pre>
</div>
</div>
</section>
<section id="section-26" class="slide level2">
<h2></h2>
<p>Q. How many observations are available between 2013 and 2015 including 2013 and 2015?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2013</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2015</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40,227 × 35
   row_id            year department_title payroll_department record_number
   &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;                         &lt;dbl&gt;         &lt;dbl&gt;
 1 3-1000027830ctFu  2013 Police (LAPD)                  4301    1000027830
 2 3-1000155488ctFu  2013 Police (LAPD)                  4302    1000155488
 3 3-1000194958ctFu  2013 Police (LAPD)                  4301    1000194958
 4 3-1000232317ctFu  2013 Police (LAPD)                  4301    1000232317
 5 3-1000329284ctFu  2013 Police (LAPD)                  4302    1000329284
 6 3-1001124320ctFu  2013 Police (LAPD)                  4302    1001124320
 7 3-1001221822ctFu  2013 Police (LAPD)                  4301    1001221822
 8 3-1001243583ctFu  2013 Police (LAPD)                  4301    1001243583
 9 3-1001317832ctFu  2013 Police (LAPD)                  4301    1001317832
10 3-100162910ctFu   2013 Police (LAPD)                  4301     100162910
# ℹ 40,217 more rows
# ℹ 30 more variables: job_class_title &lt;chr&gt;, employment_type &lt;chr&gt;,
#   hourly_or_event_rate &lt;dbl&gt;, projected_annual_salary &lt;dbl&gt;,
#   q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;, q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;,
#   payments_over_base_pay &lt;dbl&gt;, percent_over_base_pay &lt;dbl&gt;,
#   total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;, permanent_bonus_pay &lt;dbl&gt;,
#   longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="section-27" class="slide level2">
<h2></h2>
<p>Q. How many observations are available between 2013 and 2015 including 2013 and 2015?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2013</span> <span class="sc">&amp;</span> year <span class="sc">&lt;=</span> <span class="dv">2015</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="#cb43-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 40227</code></pre>
</div>
</div>
</section>
<section id="section-28" class="slide level2">
<h2></h2>
<p>Q. How many LAPD staff were employed full time in 2018?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2"></a>  <span class="fu">filter</span>(employment_type <span class="sc">==</span> <span class="st">"Full Time"</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14664</code></pre>
</div>
</div>
</section>
<section id="section-29" class="slide level2">
<h2></h2>
<p>We have done all sorts of selections, slicing, filtering on <code>lapd</code> but it has not changed at all. Why do you think so?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">glimpse</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 68,564
Columns: 35
$ row_id                     &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu", "3-…
$ year                       &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
$ department_title           &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Police (…
$ payroll_department         &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 4301, 4…
$ record_number              &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 1000232…
$ job_class_title            &lt;chr&gt; "Police Detective II", "Clerk Typist", "Pol…
$ employment_type            &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Ful…
$ hourly_or_event_rate       &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.42, 4…
$ projected_annual_salary    &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.24, …
$ q1_payments                &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20, 208…
$ q2_payments                &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20, 241…
$ q3_payments                &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81, 215…
$ q4_payments                &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03, 252…
$ payments_over_base_pay     &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1376.…
$ percent_over_base_pay      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
$ total_payments             &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.24, …
$ base_pay                   &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.71, …
$ permanent_bonus_pay        &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, 0.00…
$ longevity_bonus_pay        &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 1726.16…
$ temporary_bonus_pay        &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00, 68…
$ lump_sum_pay               &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.00, 0…
$ overtime_pay               &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.00, 4…
$ other_pay_adjustments      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.80, …
$ other_pay_payroll_explorer &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 1376.19…
$ mou                        &lt;chr&gt; "24", "3", "24", "24", "12", "3", "24", "24…
$ mou_title                  &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT", "P…
$ fms_department             &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70,…
$ job_class                  &lt;chr&gt; "2223", "1358", "2227", "2232", "1839", "22…
$ pay_grade                  &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1", "B"…
$ average_health_cost        &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40, 107…
$ average_dental_cost        &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24, 405…
$ average_basic_life         &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 11.40…
$ average_benefit_cost       &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52, 111…
$ benefits_plan              &lt;chr&gt; "Police", "City", "Police", "Police", "City…
$ job_class_link             &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pdf", …</code></pre>
</div>
</div>
</section>
<section id="section-30" class="slide level2">
<h2></h2>
<p>Moving forward we are only going to focus on year 2018, and use <code>job_class_title</code>, <code>employment_type</code>, and <code>base_pay</code>. Let’s clean our data accordingly and move on with the smaller <code>lapd</code> data that we need.</p>
</section>
<section id="section-31" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="#cb49-3"></a>  <span class="fu">select</span>(job_class_title, </span>
<span id="cb49-4"><a href="#cb49-4"></a>         employment_type, </span>
<span id="cb49-5"><a href="#cb49-5"></a>         base_pay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 3
   job_class_title                  employment_type base_pay
   &lt;chr&gt;                            &lt;chr&gt;              &lt;dbl&gt;
 1 Police Detective II              Full Time        119322.
 2 Police Sergeant I                Full Time        113271.
 3 Police Lieutenant II             Full Time        148116 
 4 Police Service Representative II Full Time         78677.
 5 Police Officer III               Full Time        109374.
 6 Police Officer II                Full Time         95002.
 7 Police Officer II                Full Time         95379.
 8 Police Officer II                Full Time         95388.
 9 Equipment Mechanic               Full Time         80496 
10 Detention Officer                Full Time         69640 
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</section>
<section id="section-32" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>lapd <span class="ot">&lt;-</span> </span>
<span id="cb51-2"><a href="#cb51-2"></a>  lapd <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="#cb51-3"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="#cb51-4"></a>  <span class="fu">select</span>(job_class_title, </span>
<span id="cb51-5"><a href="#cb51-5"></a>         employment_type, </span>
<span id="cb51-6"><a href="#cb51-6"></a>         base_pay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-33" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="fu">glimpse</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 14,824
Columns: 3
$ job_class_title &lt;chr&gt; "Police Detective II", "Police Sergeant I", "Police Li…
$ employment_type &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Full Time", "F…
$ base_pay        &lt;dbl&gt; 119321.60, 113270.70, 148116.00, 78676.87, 109373.63, …</code></pre>
</div>
</div>
<p><strong>Goal</strong>:</p>
<p>Create a new variable called <code>base_pay_k</code> that represents <code>base_pay</code> in thousand dollars.</p>
</section>
<section id="section-34" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2"></a>  <span class="fu">mutate</span>(<span class="at">base_pay_k =</span> base_pay<span class="sc">/</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 4
   job_class_title                  employment_type base_pay base_pay_k
   &lt;chr&gt;                            &lt;chr&gt;              &lt;dbl&gt;      &lt;dbl&gt;
 1 Police Detective II              Full Time        119322.      119. 
 2 Police Sergeant I                Full Time        113271.      113. 
 3 Police Lieutenant II             Full Time        148116       148. 
 4 Police Service Representative II Full Time         78677.       78.7
 5 Police Officer III               Full Time        109374.      109. 
 6 Police Officer II                Full Time         95002.       95.0
 7 Police Officer II                Full Time         95379.       95.4
 8 Police Officer II                Full Time         95388.       95.4
 9 Equipment Mechanic               Full Time         80496        80.5
10 Detention Officer                Full Time         69640        69.6
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</section>
<section id="section-35" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="fu">glimpse</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 14,824
Columns: 3
$ job_class_title &lt;chr&gt; "Police Detective II", "Police Sergeant I", "Police Li…
$ employment_type &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Full Time", "F…
$ base_pay        &lt;dbl&gt; 119321.60, 113270.70, 148116.00, 78676.87, 109373.63, …</code></pre>
</div>
</div>
<p><strong>Goal</strong>:</p>
<p>Create a new variable called <code>base_pay_level</code> which has <code>Less Than 0</code>, <code>No Income</code>, <code>Less than Median and Greater than 0</code> and <code>Greater than Median</code>. We will consider $62474 as the median (from previous lecture).</p>
</section>
<section id="section-36" class="slide level2">
<h2></h2>
<p>Let’s first check to see there is anyone earning exactly the median value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">filter</span>(base_pay <span class="sc">==</span> <span class="dv">62474</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 3
# ℹ 3 variables: job_class_title &lt;chr&gt;, employment_type &lt;chr&gt;, base_pay &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-37" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="#cb60-2"></a>  <span class="fu">mutate</span>(<span class="at">base_pay_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb60-3"><a href="#cb60-3"></a>    base_pay <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than 0"</span>, </span>
<span id="cb60-4"><a href="#cb60-4"></a>    base_pay <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"No Income"</span>,</span>
<span id="cb60-5"><a href="#cb60-5"></a>    base_pay <span class="sc">&lt;</span> <span class="dv">62474</span> <span class="sc">&amp;</span> base_pay <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than Median, Greater than 0"</span>,</span>
<span id="cb60-6"><a href="#cb60-6"></a>    base_pay <span class="sc">&gt;</span> <span class="dv">62474</span> <span class="sc">~</span> <span class="st">"Greater than Median"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 4
   job_class_title                  employment_type base_pay base_pay_level     
   &lt;chr&gt;                            &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;              
 1 Police Detective II              Full Time        119322. Greater than Median
 2 Police Sergeant I                Full Time        113271. Greater than Median
 3 Police Lieutenant II             Full Time        148116  Greater than Median
 4 Police Service Representative II Full Time         78677. Greater than Median
 5 Police Officer III               Full Time        109374. Greater than Median
 6 Police Officer II                Full Time         95002. Greater than Median
 7 Police Officer II                Full Time         95379. Greater than Median
 8 Police Officer II                Full Time         95388. Greater than Median
 9 Equipment Mechanic               Full Time         80496  Greater than Median
10 Detention Officer                Full Time         69640  Greater than Median
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</section>
<section id="section-38" class="slide level2">
<h2></h2>
<p>We can’t really see what we have created</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="#cb62-2"></a>  <span class="fu">mutate</span>(<span class="at">base_pay_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb62-3"><a href="#cb62-3"></a>    base_pay <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than 0"</span>, </span>
<span id="cb62-4"><a href="#cb62-4"></a>    base_pay <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"No Income"</span>,</span>
<span id="cb62-5"><a href="#cb62-5"></a>    base_pay <span class="sc">&lt;</span> <span class="dv">62474</span> <span class="sc">&amp;</span> base_pay <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than Median, Greater than 0"</span>,</span>
<span id="cb62-6"><a href="#cb62-6"></a>    base_pay <span class="sc">&gt;</span> <span class="dv">62474</span> <span class="sc">~</span> <span class="st">"Greater than Median"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-7"><a href="#cb62-7"></a>  <span class="fu">select</span>(base_pay_level)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 1
   base_pay_level     
   &lt;chr&gt;              
 1 Greater than Median
 2 Greater than Median
 3 Greater than Median
 4 Greater than Median
 5 Greater than Median
 6 Greater than Median
 7 Greater than Median
 8 Greater than Median
 9 Greater than Median
10 Greater than Median
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</section>
<section id="section-39" class="slide level2">
<h2></h2>
<p>We can use pipes with ggplot too!</p>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="fu">mutate</span>(<span class="at">base_pay_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb64-3"><a href="#cb64-3"></a>    base_pay <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than 0"</span>, </span>
<span id="cb64-4"><a href="#cb64-4"></a>    base_pay <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"No Income"</span>,</span>
<span id="cb64-5"><a href="#cb64-5"></a>    base_pay <span class="sc">&lt;</span> <span class="dv">62474</span> <span class="sc">&amp;</span> base_pay <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than Median, Greater than 0"</span>,</span>
<span id="cb64-6"><a href="#cb64-6"></a>    base_pay <span class="sc">&gt;</span> <span class="dv">62474</span> <span class="sc">~</span> <span class="st">"Greater than Median"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-7"><a href="#cb64-7"></a>  <span class="fu">select</span>(base_pay_level) <span class="sc">%&gt;%</span> </span>
<span id="cb64-8"><a href="#cb64-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> base_pay_level)) <span class="sc">+</span></span>
<span id="cb64-9"><a href="#cb64-9"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="5-lec-wrangle_files/figure-revealjs/unnamed-chunk-42-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</section>
<section id="section-40" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="fu">glimpse</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 14,824
Columns: 3
$ job_class_title &lt;chr&gt; "Police Detective II", "Police Sergeant I", "Police Li…
$ employment_type &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Full Time", "F…
$ base_pay        &lt;dbl&gt; 119321.60, 113270.70, 148116.00, 78676.87, 109373.63, …</code></pre>
</div>
</div>
<p><strong>Goal</strong>:</p>
<p>Make <code>job_class_title</code> and <code>employment_type</code> factor variables.</p>
</section>
<section id="section-41" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2"></a>  <span class="fu">mutate</span>(<span class="at">employment_type =</span> <span class="fu">as.factor</span>(employment_type),</span>
<span id="cb67-3"><a href="#cb67-3"></a>         <span class="at">job_class_title =</span> <span class="fu">as.factor</span>(job_class_title)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 3
   job_class_title                  employment_type base_pay
   &lt;fct&gt;                            &lt;fct&gt;              &lt;dbl&gt;
 1 Police Detective II              Full Time        119322.
 2 Police Sergeant I                Full Time        113271.
 3 Police Lieutenant II             Full Time        148116 
 4 Police Service Representative II Full Time         78677.
 5 Police Officer III               Full Time        109374.
 6 Police Officer II                Full Time         95002.
 7 Police Officer II                Full Time         95379.
 8 Police Officer II                Full Time         95388.
 9 Equipment Mechanic               Full Time         80496 
10 Detention Officer                Full Time         69640 
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</section>
<section id="section-42" class="slide level2">
<h2></h2>
<p><code>as.factor()</code> - makes a vector factor<br>
<code>as.numeric()</code> - makes a vector numeric<br>
<code>as.integer()</code> - makes a vector integer<br>
<code>as.double()</code> - makes a vector double<br>
<code>as.character()</code> - makes a vector character</p>
</section>
<section id="section-43" class="slide level2">
<h2></h2>
<p>Once again we did not “save” anything into <code>lapd</code>. As we work on data cleaning it makes sense not to “save” the data frames. Once we see the final data frame we want then we can “save” (i.e.&nbsp;overwrite) it.</p>
</section>
<section id="section-44" class="slide level2">
<h2></h2>
<p>In your lecture notes, you can do all the changes in this lecture in one long set of piped code. That’s the beauty of piping!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>lapd <span class="ot">&lt;-</span> </span>
<span id="cb69-2"><a href="#cb69-2"></a>  lapd <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="#cb69-3"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb69-4"><a href="#cb69-4"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2018</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-5"><a href="#cb69-5"></a>  <span class="fu">select</span>(job_class_title, </span>
<span id="cb69-6"><a href="#cb69-6"></a>         employment_type, </span>
<span id="cb69-7"><a href="#cb69-7"></a>         base_pay) <span class="sc">%&gt;%</span> </span>
<span id="cb69-8"><a href="#cb69-8"></a>    <span class="fu">mutate</span>(<span class="at">employment_type =</span> <span class="fu">as.factor</span>(employment_type),</span>
<span id="cb69-9"><a href="#cb69-9"></a>           <span class="at">job_class_title =</span> <span class="fu">as.factor</span>(job_class_title),</span>
<span id="cb69-10"><a href="#cb69-10"></a>           <span class="at">base_pay_level =</span> <span class="fu">case_when</span>(</span>
<span id="cb69-11"><a href="#cb69-11"></a>             base_pay <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than 0"</span>, </span>
<span id="cb69-12"><a href="#cb69-12"></a>             base_pay <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"No Income"</span>,</span>
<span id="cb69-13"><a href="#cb69-13"></a>             base_pay <span class="sc">&lt;</span> <span class="dv">62474</span> <span class="sc">&amp;</span> base_pay <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"Less than Median, Greater than 0"</span>,</span>
<span id="cb69-14"><a href="#cb69-14"></a>             base_pay <span class="sc">&gt;</span> <span class="dv">62474</span> <span class="sc">~</span> <span class="st">"Greater than Median"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="word-of-caution" class="slide level2">
<h2>Word of caution</h2>
<p>The functions <code>clean_names()</code>, <code>select()</code>, <code>filter()</code>, <code>mutate()</code> all take a data frame as the first argument. Even though we do not see it, the data frame is piped through from the previous step of code at each step. When we use these functions without the <code>%&gt;%</code> we have to include the data frame explicitly.</p>
<div class="columns">
<div class="column" style="width:40%;">
<p>Data frame is used as the first argument</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="fu">clean_names</span>(lapd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 4
   job_class_title                  employment_type base_pay base_pay_level     
   &lt;fct&gt;                            &lt;fct&gt;              &lt;dbl&gt; &lt;chr&gt;              
 1 Police Detective II              Full Time        119322. Greater than Median
 2 Police Sergeant I                Full Time        113271. Greater than Median
 3 Police Lieutenant II             Full Time        148116  Greater than Median
 4 Police Service Representative II Full Time         78677. Greater than Median
 5 Police Officer III               Full Time        109374. Greater than Median
 6 Police Officer II                Full Time         95002. Greater than Median
 7 Police Officer II                Full Time         95379. Greater than Median
 8 Police Officer II                Full Time         95388. Greater than Median
 9 Equipment Mechanic               Full Time         80496  Greater than Median
10 Detention Officer                Full Time         69640  Greater than Median
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>Data frame is piped</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2"></a>  <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 4
   job_class_title                  employment_type base_pay base_pay_level     
   &lt;fct&gt;                            &lt;fct&gt;              &lt;dbl&gt; &lt;chr&gt;              
 1 Police Detective II              Full Time        119322. Greater than Median
 2 Police Sergeant I                Full Time        113271. Greater than Median
 3 Police Lieutenant II             Full Time        148116  Greater than Median
 4 Police Service Representative II Full Time         78677. Greater than Median
 5 Police Officer III               Full Time        109374. Greater than Median
 6 Police Officer II                Full Time         95002. Greater than Median
 7 Police Officer II                Full Time         95379. Greater than Median
 8 Police Officer II                Full Time         95388. Greater than Median
 9 Equipment Mechanic               Full Time         80496  Greater than Median
10 Detention Officer                Full Time         69640  Greater than Median
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-45" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="font50">
<p>Data</p>
</div>
<p>Observations</p>
</div><div class="column" style="width:40%;">
<div class="font50">
<p>Aggregate Data</p>
</div>
<p>Summaries of observations</p>
</div>
</div>
</section>
<section id="section-46" class="slide level2">
<h2></h2>
<div class="font75">
<p>Aggregating Categorical Data</p>
</div>
</section>
<section id="section-47" class="slide level2">
<h2></h2>
<p>Categorical data are summarized with <strong>counts</strong> or <strong>proportions</strong></p>
</section>
<section id="section-48" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="#cb74-2"></a>  <span class="fu">count</span>(employment_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  employment_type     n
  &lt;fct&gt;           &lt;int&gt;
1 Full Time       14664
2 Part Time         132
3 Per Event          28</code></pre>
</div>
</div>
</section>
<section id="section-49" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="#cb76-2"></a>  <span class="fu">count</span>(employment_type) <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href="#cb76-3"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n<span class="sc">/</span><span class="fu">sum</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  employment_type     n    prop
  &lt;fct&gt;           &lt;int&gt;   &lt;dbl&gt;
1 Full Time       14664 0.989  
2 Part Time         132 0.00890
3 Per Event          28 0.00189</code></pre>
</div>
</div>
</section>
<section id="mean" class="slide level2">
<h2>Mean</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a><span class="fu">summarize</span>(lapd, </span>
<span id="cb78-2"><a href="#cb78-2"></a>          <span class="at">mean_base_pay =</span> <span class="fu">mean</span>(base_pay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_base_pay
          &lt;dbl&gt;
1        85149.</code></pre>
</div>
</div>
</section>
<section id="mean-is-not-a-good-measure-when-the-data-are-skewed" class="slide level2">
<h2>Mean is not a good measure when the data are skewed</h2>

<img data-src="5-lec-wrangle_files/figure-revealjs/unnamed-chunk-52-1.png" width="960" class="r-stretch"></section>
<section id="median" class="slide level2">
<h2>Median</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a><span class="fu">summarize</span>(lapd, </span>
<span id="cb80-2"><a href="#cb80-2"></a>          <span class="fu">median</span>(base_pay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `median(base_pay)`
               &lt;dbl&gt;
1             97601.</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="fu">median</span>(lapd<span class="sc">$</span>base_pay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 97600.66</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="quantiles" class="slide level2">
<h2>Quantiles</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="fu">summarize</span>(lapd, <span class="fu">quantile</span>(base_pay, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  `quantile(base_pay, c(0.25, 0.5, 0.75))`
                                     &lt;dbl&gt;
1                                   67266.
2                                   97601.
3                                  109368.</code></pre>
</div>
</div>
</section>
<section id="section-50" class="slide level2">
<h2></h2>
<p>Recall that we use multiple functions such as <code>mean()</code> and <code>median</code> within the summarize function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="fu">summarize</span>(lapd,</span>
<span id="cb86-2"><a href="#cb86-2"></a>          <span class="at">mean_base_pay =</span> <span class="fu">mean</span>(base_pay),</span>
<span id="cb86-3"><a href="#cb86-3"></a>          <span class="at">med_base_pay =</span> <span class="fu">median</span>(base_pay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_base_pay med_base_pay
          &lt;dbl&gt;        &lt;dbl&gt;
1        85149.       97601.</code></pre>
</div>
</div>
</section>
<section id="section-51" class="slide level2">
<h2></h2>
<div class="font75">
<p>Aggregating Data by Groups</p>
</div>
</section>
<section id="section-52" class="slide level2">
<h2></h2>
<p><code>group_by()</code></p>

<img data-src="img/data-wrangle.003.jpeg" style="width:80.0%" class="r-stretch quarto-figure-center"><p><code>group_by()</code> separates the data frame by the groups. Any action following <code>group_by()</code> will be completed for each group separately.</p>
</section>
<section id="section-53" class="slide level2">
<h2></h2>
<p>Q. What is the median salary for each employment type?</p>
</section>
<section id="section-54" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="#cb88-2"></a>  <span class="fu">group_by</span>(employment_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,824 × 4
# Groups:   employment_type [3]
   job_class_title                  employment_type base_pay base_pay_level     
   &lt;fct&gt;                            &lt;fct&gt;              &lt;dbl&gt; &lt;chr&gt;              
 1 Police Detective II              Full Time        119322. Greater than Median
 2 Police Sergeant I                Full Time        113271. Greater than Median
 3 Police Lieutenant II             Full Time        148116  Greater than Median
 4 Police Service Representative II Full Time         78677. Greater than Median
 5 Police Officer III               Full Time        109374. Greater than Median
 6 Police Officer II                Full Time         95002. Greater than Median
 7 Police Officer II                Full Time         95379. Greater than Median
 8 Police Officer II                Full Time         95388. Greater than Median
 9 Equipment Mechanic               Full Time         80496  Greater than Median
10 Detention Officer                Full Time         69640  Greater than Median
# ℹ 14,814 more rows</code></pre>
</div>
</div>
</section>
<section id="section-55" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="#cb90-2"></a>  <span class="fu">group_by</span>(employment_type) <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="#cb90-3"></a>  <span class="fu">summarize</span>(<span class="at">med_base_pay =</span> <span class="fu">median</span>(base_pay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  employment_type med_base_pay
  &lt;fct&gt;                  &lt;dbl&gt;
1 Full Time             97996.
2 Part Time             14474.
3 Per Event              4275 </code></pre>
</div>
</div>
</section>
<section id="section-56" class="slide level2">
<h2></h2>
<p>We can also remind ourselves how many staff members there were in each group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>lapd <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a href="#cb92-2"></a>  <span class="fu">group_by</span>(employment_type) <span class="sc">%&gt;%</span> </span>
<span id="cb92-3"><a href="#cb92-3"></a>  <span class="fu">summarize</span>(<span class="at">med_base_pay =</span> <span class="fu">median</span>(base_pay),</span>
<span id="cb92-4"><a href="#cb92-4"></a>            <span class="at">count =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  employment_type med_base_pay count
  &lt;fct&gt;                  &lt;dbl&gt; &lt;int&gt;
1 Full Time             97996. 14664
2 Part Time             14474.   132
3 Per Event              4275     28</code></pre>
</div>
</div>
<p>Note that <code>n()</code> does not take any arguments.</p>

<img src="https://www.stat.uci.edu/bayes-bats/img/logo.png" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="5-lec-wrangle_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="5-lec-wrangle_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="5-lec-wrangle_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>